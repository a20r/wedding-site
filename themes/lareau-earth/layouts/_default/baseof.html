<!DOCTYPE html>
<html lang="{{ .Site.Language.Lang }}">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ block "title" . }}{{ if .Title }}{{ .Title }} Â· {{ end }}{{ .Site.Title }}{{ end }}</title>
    <meta name="description" content="{{ with .Params.description }}{{ . }}{{ else }}{{ .Site.Params.heroTagline }}{{ end }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet" />
    {{ $styles := resources.Get "css/main.css" | resources.Minify | resources.Fingerprint }}
    <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}" />
    {{ block "head" . }}{{ end }}
  </head>
  <body>
    <div class="site-wrapper">
      {{ block "main" . }}{{ end }}
      <script>
        const navLinks = document.querySelectorAll('.nav-links a');
        const sections = Array.from(navLinks).map(link => document.querySelector(link.getAttribute('href'))).filter(Boolean);
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const id = `#${entry.target.id}`;
              navLinks.forEach(link => {
                link.classList.toggle('is-active', link.getAttribute('href') === id);
              });
            }
          });
        }, { rootMargin: '-40% 0px -50% 0px', threshold: [0, 0.3, 0.6] });

        sections.forEach(section => {
          if (section) {
            observer.observe(section);
          }
        });
      </script>
      {{ block "scripts" . }}{{ end }}
    </div>
  </body>
</html>
